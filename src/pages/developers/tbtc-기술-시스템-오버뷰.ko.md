---
template: resource
title: tBTC 기술 시스템 오버뷰
heading: tBTC 기술 시스템 오버뷰
description: 'TCT 영수증, 롯 사이즈, Keep의 랜덤 비컨 및 한계 시그니처에 대해 배워보세요.'
date: 2020-07-29T11:02:45.662Z
tags:
  - developers
---
tBTC는 유저들에게 주요한 영향을 주는 새로운 설계 기능을 포함합니다. 본 문서는 TDT 영수증, 롯 사이즈, Keep의 랜덤 비컨 및 한계 시그니쳐, 네가지에 대해 설명합니다.

## TBTC 입금 토큰 - TBTC Deposit Token (TDT)

TDT는 대체 불가능한(non-fungible) 토큰으로, 유저가 입금을 요청하면 발행됩니다. TDT는 대체 불가능한 ERC-721 토큰으로 TBTC의 상대적 지위를 가집니다. TDT는 예치금에 대한 비트코인 블록체인상의 UTXO에 대한 소유권을 의미합니다.

TBTC 예치금은 락 또는 언락 될 수 있습니다. 락이 된 예치금은 오직 해당되는 TDT를 가진 입금자만이 환불 받을 수 있습니다. 각각의 TDT는 예치 및 발행 건별로 각각 다르고, 예치금을 환불 받을 수 있는 독점적 권한은 최대 6개월간 유지됩니다.

예치금이 비트코인 tx 증명을 통해 완전 인증이 되면(SPV Relay라고 합니다), 홀더는 환뷸을 요청할수 있고, 사이닝 요금을 지불하고 나면 비트코인 네트워크에 예치하였던 입금에 대한 같은 UTXO를 보장 받을 수 있습니다.

TDT와 TBTC는 벤딩머신이라는 컨트랙트를 통해 상호교환 가능합니다. 

* TDT가 있으면, TBTC가 발행됩니다.
* TBTC가 있으면, 소각후 해당되는 TDT가 환원됩니다.
* TDT는 락이 걸린 BTC 예치금을 환불받기 위해 필요합니다*. 코트을 맞기고 받은 티켓이랑 유사하게 생각하시면 됩니다. 티켓이 없으면 BTC를 돌려받을 수 업습니다.

TDT는 전송 가능합니다. 홀더들은 TDT를 거래하거나, 다른 곳에서의 담보로 활용할 수 있습니다.

사기 또는 담보 관련 이벤트시, TDT 홀더는 사이닝 그룹의 담보롤 보상을 보장 받습니다. 만약 해당 이벤트 발생시 다른 계좌에서 예치금이 환불 될 경우, TDT 홀더는 TBTC를 더 적은 사이너 수수료를 부담하고 TBTC로의 보상을 보장 받습니다. TDT 홀더는 6개월 후 다른 유저가 BTC 예치금을 환불 받지 않았으면, BTC 예치금을 환불 받을 수 있습니다.

0.001 BTC 보다는 1 BTC를 훔치는 것이 더 가치가 있기 때문에, 후자는 re-orgs 등의 공격에 더 민감합니다. NFT로써, TDT는 이러한 리스크가 가치에 선반영 되도록 하고 있습니다. 이것은 BTC를 담보로 활용하는 앱에게는 매우 적절한 방법입니다. TDT를 받는 모든 수령인은 해당코인의 리스크 평가가 필요할 것입니다. TDT는 위험을 분리하도록 설계되었습니다. 예치금을 담보하는 TDT에 대한 공격은 TDT 홀더에게만 영향을 주고 전체 공급페깅 통화에는 영향을 주지 않습니다.

## 롯과 롯 사이즈

tBTC에서의 예치금은 롯 단위로 관리 됩니다. 시스템을 합리적으로 관리하기 위해, 롯은 고정된 사이즈들로 구성되어 있으며 시스템에 의해 관리됩니다. 만약 현존하는 롯 사이즈보다 큰 금액의 BTC를 예치하고 싶을 경우, 여러개의 입금 요청을 통해 여러차례 입금을 진행 하여야 합니다. 이 방법으로 각각의 예치금을 각각 다른 사이닝 그룹에 의해 보증되게 함으로서, 사이닝 그룹의 본딩을 간략화하고, 사이닝 그룹의 실패 또는 오동작으로 부터 시스템을 보호합니다.

이러한 설계는 유저들이 익숙해져야할 중요한 적용사항입니다.

*각각의 예치금은 정규 롯 사이즈여야 한다*

시스템은 유저가 실수로 정규 예치금 사이즈보더 많거나 적은 입금을 하는 경우인, 오버페이먼트와 언더페이먼트의 상황을 모두 처리합니다. 오버/언더페이먼트의 먼트의 주요 문제점은 사이너의 담보 왜곡 문제입니다. 시스템은 이러한 상황의 비용을 유저들에게 전가합니다.

언더페이먼트의 경우 -- BTC 롯 사이즈보다 적은 금액을 입금 -- 시스템은  TBTC를 환원하기 위한 증명을 발행하지 않습니다. 유저는 예치된 BTC를 몰수 당하고, 사이너가 나눠 갖습니다.

*유저들은 이부분에 대해 잘 인지하여야 합니다. 예를들어, 롯 사이즈가 1 BTC인 상황에서 0.5 BTC를 2번 입금하는 경우를 쉽게 생각합니다. 시스템은 이를 두번의 언더페이먼트로 인식하게되어 유저는 모든 BTC를 잃게 됩니다. 간단하게, 롯 사이즈는 고정이고, 입금은 해당 금액으로만 생성되어야 합니다.*

오버페이먼트의 경우 -- BTC 롯 사이즈보다 많은 금액을 입금 -- 시스템은 정규 롯 사이즈로 증명을 생성하고, 해당 롯 사이즈 대한 환불가능한 TBTC를 교환해 줍니다. 효율적인 시장에서 환원자는 차익을 노리고 오버펀딩된 금액을 즉각 환원할 것입니다. 최초 입금자가 예치금을 환원하지 않는다면 오버페이먼트는 몰수 됩니다.

* 1 BTC 롯 사이즈의 경우, 유저가 1.4 BTC를 예치하게되면 1 TBTC(롯 사이즈 금액)를 발행할 수 있습니다. 이제 더 큰 금액의 예치금이 시스템에 존재하게 됩니다. 아마 1 TBTC를 1.4 BTC로 환원할 기회가 생겨 이 예치금은 금방 환원 될 것입니다. 추가 BTC를 입금하는 유저는 다른 유저들과 마찬가지로 1 TBTC로 1 BTC를 환원 받습니다. 그리고 나머지 0.4 BTC는 잃어버립니다. 유저가 빨리 실수를 깨닳고 TBTC를 최초 1.4 BTC로 예치금으로 환원하게 되는 경우를 제외할 경우입니다.

시스템은 에치금 롯 사이즈보다 큰 첫번째 UTXO만 받아 들입니다. 사이닝 그룹으로 보내진 다른 모든 BTC는 몰수됩니다. 그러므로 입금자는 하나의 UTXO 만을 보내는 것이 중요합니다. 입금자로부터 여러개의 UTXO를 받아들이는 것은 각각의 UTXO가 SPV를 통해 증명되어야 함으로, 온체인상의 심각한 복잡성과 가스 비용을 초래합니다. 사이너들은 각각의 TX를 UTXO의 총 금액이이 얼마인지 모르는채 증명하고 보상받아야 합니다.

## 사이너 선정을 위한 랜덤 비컨

Keep 네트워크는 tBTC 사이너를 선정하기 위해 신뢰할 수 있는 소스가 필요합니다. 이는 BLS 한계 릴레이 방식을 채택합니다.

사이닝 그룹을 생성하기 위한 요청이 발생하면, tBTC 시스템은 안전한 탈중앙화 랜덤 비컨을 이용하여 조건에 맞는 사이너 풀에서 무작위로 사이닝 그룹을 선정합니다. 이 사이너들은 분산 키 생성 프로토콜을 이용해 호스트 체인의 발행되는 지갑 주소를 생성하는 공개 ECDSA 키를 생성합니다. 이렇게 사이너 선정 절차는 마무리 됩니다.

## 한계 시그니처(Threshold Signatures)

tBTC는 키 생성을 위해 한계 시그니쳐를 이용합니다. 한계 시그니처는 사이너 그룹이 프라이빗 키 &quot;지분&quot;으로부터 하나의 퍼블릭키를 생성하게 합니다. 이는 사이너들이 그룹의 시그니처를 생성하는 방법입니다. 유저들은 여러개의 프라이빗 키로 설정된 하나의 퍼블릭 키로 사이너 그룹을 확인할 수 있습니다. 이 방법은 정규 멀티시그 설계를 위한 노력 없이 보안을 제공합니다.

한계 시그니처는 여러가지 장점을 제공합니다:

* 그룹 생성을 위한 최소한의 조정이 필요합니다.
* 그룹의 단일 멤버를 신뢰할 필요가 없습니다.
* 그룹 절반까지에 대해서는 오동작 또는 운영실패에 탄역적입니다.

사이닝 그룹의 3명인 tBTC v1에서는, 그룹을 대표하는 시그니처를 생성하기 위해 3명의 사이너 모두가 협업해야 합니다.

한계 시그니처 관련 추가 정보 [여기](https://blog.keep.network/threshold-signatures-ff2c2b98d9c7).

더 많은 정보, 도구, 문서를 위해 [GitHub](https://github.com/keep-network/tbtc) 을 방문해 주세요. 정보 및 이더리움 메인넷 런칭 관련 업데트를 위해 [tBTC 메일링 리스트에 가입](https://tbtc.network/#mailing-list) 하세요. tBTC의 기술적 설계를 더 알고 싶으면, [technical spec](http://docs.keep.network/tbtc/index.pdf)을 읽어보세요. tBTC에 관한 기술적 질문을 위해 [Keep #tbtc channel on Discord](https://chat.tbtc.network)와 [tbtc.js](https://tbtc.network/news/2020-02-14-announcing-tbtc-js), 에 가입하시고 뉴스와 참여 기회를 위해 [Twitter](https://twitter.com/search?q=%22%23tbtc%22&src=typed_query) 를 팔로우 하세요.
